{"ast":null,"code":"import _defineProperty from \"/home/pacheco/Apps/react-apps/debts-manager-with-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/pacheco/Apps/react-apps/debts-manager-with-db/src/pages/Debts.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport CustomersService from '../services/customers.service';\nimport Dropdown from '../components/Dropdown';\nimport Table from '../components/Table';\nimport EditModal from '../components/EditModal';\nimport add from '../img/add.png';\nimport './Debts.css';\nexport default class DebtsPage extends Component {\n  constructor() {\n    super();\n    this.state = {\n      customers: [],\n      debts: [],\n      debtUnderEdition: undefined\n    };\n\n    this.handleDeleteDebt = debtToRemove => {\n      this.setState(prevState => ({\n        debts: prevState.debts.filter(item => item.id !== debtToRemove)\n      }));\n    };\n\n    this.handleEditDebt = debtToEdit => {\n      this.setState(() => {\n        return {\n          debtUnderEdition: debtToEdit\n        };\n      });\n    };\n\n    this.handleSaveChanges = e => {\n      e.preventDefault();\n      const customerName = this.state.debtUnderEdition.name;\n      const description = e.target.elements.description.value.trim();\n      const value = e.target.elements.value.value;\n      this.setState(prevState => ({\n        debts: prevState.debts.map(item => {\n          if (item.id === this.state.debtUnderEdition.id) {\n            item = _objectSpread({}, item, {\n              name: customerName,\n              description,\n              value\n            });\n          }\n\n          return item;\n        }),\n        debtUnderEdition: undefined\n      }));\n    };\n\n    this.handleClearDebtUnderEdition = () => {\n      this.setState(() => ({\n        debtUnderEdition: undefined\n      }));\n    };\n\n    this.handleListCustomerDebts = customerName => {\n      this.state.debts.filter(item => item.customerNam === customerName);\n      console.log(this.state.debts);\n      console.log(customerName);\n    };\n\n    this.handleNewDebt = e => {\n      e.preventDefault();\n      const customerName = e.target.elements.customerName.value;\n      const description = e.target.elements.description.value.trim();\n      const value = e.target.elements.value.value;\n      const debt = {\n        id: this.state.debts.length + 1,\n        name: customerName,\n        description,\n        value\n      };\n      this.setState(prevState => ({\n        debts: prevState.debts.concat(debt)\n      })); // clear inputs\n\n      e.target.elements.description.value = '';\n      e.target.elements.value.value = '';\n    };\n\n    this.service = new CustomersService();\n  }\n\n  componentDidMount() {\n    this.getCustomers();\n  }\n\n  async getCustomers() {\n    const response = await this.service.getUsers();\n    let names = [];\n\n    for (let i = 0; i < response.data.length; i++) {\n      names.push(response.data[i].name);\n    }\n\n    this.setState(() => ({\n      customers: names\n    }));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Compras\")), React.createElement(\"div\", {\n      className: \"input-bar-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleNewDebt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Cliente\", React.createElement(Dropdown, {\n      customers: this.state.customers,\n      inputName: \"customerName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Descri\\xE7\\xE3o\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"description\",\n      placeholder: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Valor\", React.createElement(\"input\", {\n      type: \"number\",\n      name: \"value\",\n      placeholder: \"\",\n      step: \"any\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"add-button\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      name: \"add-debt\",\n      alt: \"Enviar\",\n      src: add,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }))))), React.createElement(Table, {\n      debts: this.state.debts,\n      customers: this.state.customers,\n      handleClearDebtUnderEdition: this.handleClearDebtUnderEdition,\n      handleDeleteDebt: this.handleDeleteDebt,\n      handleEditDebt: this.handleEditDebt,\n      handleListCustomerDebts: this.handleListCustomerDebts,\n      handleNewDebt: this.handleNewDebt,\n      className: \"customer-table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"center-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.state.debts.length > 0 ? '' : React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Nenhuma compra cadastrada\")), React.createElement(EditModal, {\n      customers: this.state.customers,\n      handleSaveChanges: this.handleSaveChanges,\n      debtUnderEdition: this.state.debtUnderEdition,\n      handleClearDebtUnderEdition: this.handleClearDebtUnderEdition,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/pacheco/Apps/react-apps/debts-manager-with-db/src/pages/Debts.js"],"names":["React","Component","CustomersService","Dropdown","Table","EditModal","add","DebtsPage","constructor","state","customers","debts","debtUnderEdition","undefined","handleDeleteDebt","debtToRemove","setState","prevState","filter","item","id","handleEditDebt","debtToEdit","handleSaveChanges","e","preventDefault","customerName","name","description","target","elements","value","trim","map","handleClearDebtUnderEdition","handleListCustomerDebts","customerNam","console","log","handleNewDebt","debt","length","concat","service","componentDidMount","getCustomers","response","getUsers","names","i","data","push","render"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,GAAP,MAAgB,gBAAhB;AACA,OAAO,aAAP;AAEA,eAAe,MAAMC,SAAN,SAAwBN,SAAxB,CAAkC;AAO9CO,EAAAA,WAAW,GAAG;AACX;AADW,SANdC,KAMc,GANN;AACLC,MAAAA,SAAS,EAAE,EADN;AAELC,MAAAA,KAAK,EAAE,EAFF;AAGLC,MAAAA,gBAAgB,EAAEC;AAHb,KAMM;;AAAA,SAkBdC,gBAlBc,GAkBMC,YAAD,IAAkB;AAClC,WAAKC,QAAL,CAAeC,SAAD,KAAgB;AAC3BN,QAAAA,KAAK,EAAEM,SAAS,CAACN,KAAV,CAAgBO,MAAhB,CAAwBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYL,YAA7C;AADoB,OAAhB,CAAd;AAGF,KAtBa;;AAAA,SAwBdM,cAxBc,GAwBIC,UAAD,IAAgB;AAC9B,WAAKN,QAAL,CAAc,MAAM;AACjB,eAAQ;AAAEJ,UAAAA,gBAAgB,EAAEU;AAApB,SAAR;AACF,OAFD;AAGF,KA5Ba;;AAAA,SA8BdC,iBA9Bc,GA8BOC,CAAD,IAAO;AACxBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMC,YAAY,GAAG,KAAKjB,KAAL,CAAWG,gBAAX,CAA4Be,IAAjD;AACA,YAAMC,WAAW,GAAGJ,CAAC,CAACK,MAAF,CAASC,QAAT,CAAkBF,WAAlB,CAA8BG,KAA9B,CAAoCC,IAApC,EAApB;AACA,YAAMD,KAAK,GAAGP,CAAC,CAACK,MAAF,CAASC,QAAT,CAAkBC,KAAlB,CAAwBA,KAAtC;AACA,WAAKf,QAAL,CAAeC,SAAD,KAAgB;AAC3BN,QAAAA,KAAK,EAAEM,SAAS,CAACN,KAAV,CAAgBsB,GAAhB,CAAqBd,IAAD,IAAU;AAClC,cAAIA,IAAI,CAACC,EAAL,KAAY,KAAKX,KAAL,CAAWG,gBAAX,CAA4BQ,EAA5C,EAAgD;AAC7CD,YAAAA,IAAI,qBAAQA,IAAR;AAAcQ,cAAAA,IAAI,EAAED,YAApB;AAAkCE,cAAAA,WAAlC;AAA+CG,cAAAA;AAA/C,cAAJ;AACF;;AACD,iBAAOZ,IAAP;AACF,SALM,CADoB;AAO3BP,QAAAA,gBAAgB,EAAEC;AAPS,OAAhB,CAAd;AASF,KA5Ca;;AAAA,SA8CdqB,2BA9Cc,GA8CgB,MAAM;AACjC,WAAKlB,QAAL,CAAc,OAAO;AAAEJ,QAAAA,gBAAgB,EAAEC;AAApB,OAAP,CAAd;AACF,KAhDa;;AAAA,SAiDdsB,uBAjDc,GAiDaT,YAAD,IAAkB;AACzC,WAAKjB,KAAL,CAAWE,KAAX,CAAiBO,MAAjB,CAAyBC,IAAD,IAAUA,IAAI,CAACiB,WAAL,KAAqBV,YAAvD;AACAW,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK7B,KAAL,CAAWE,KAAvB;AACA0B,MAAAA,OAAO,CAACC,GAAR,CAAYZ,YAAZ;AACF,KArDa;;AAAA,SAuDda,aAvDc,GAuDGf,CAAD,IAAO;AACpBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMC,YAAY,GAAGF,CAAC,CAACK,MAAF,CAASC,QAAT,CAAkBJ,YAAlB,CAA+BK,KAApD;AACA,YAAMH,WAAW,GAAGJ,CAAC,CAACK,MAAF,CAASC,QAAT,CAAkBF,WAAlB,CAA8BG,KAA9B,CAAoCC,IAApC,EAApB;AACA,YAAMD,KAAK,GAAGP,CAAC,CAACK,MAAF,CAASC,QAAT,CAAkBC,KAAlB,CAAwBA,KAAtC;AACA,YAAMS,IAAI,GAAG;AACVpB,QAAAA,EAAE,EAAE,KAAKX,KAAL,CAAWE,KAAX,CAAiB8B,MAAjB,GAA0B,CADpB;AAEVd,QAAAA,IAAI,EAAED,YAFI;AAGVE,QAAAA,WAHU;AAIVG,QAAAA;AAJU,OAAb;AAMA,WAAKf,QAAL,CAAeC,SAAD,KAAgB;AAC3BN,QAAAA,KAAK,EAAEM,SAAS,CAACN,KAAV,CAAgB+B,MAAhB,CAAuBF,IAAvB;AADoB,OAAhB,CAAd,EAXoB,CAepB;;AACAhB,MAAAA,CAAC,CAACK,MAAF,CAASC,QAAT,CAAkBF,WAAlB,CAA8BG,KAA9B,GAAsC,EAAtC;AACAP,MAAAA,CAAC,CAACK,MAAF,CAASC,QAAT,CAAkBC,KAAlB,CAAwBA,KAAxB,GAAgC,EAAhC;AACF,KAzEa;;AAEX,SAAKY,OAAL,GAAe,IAAIzC,gBAAJ,EAAf;AACF;;AAED0C,EAAAA,iBAAiB,GAAG;AACjB,SAAKC,YAAL;AACF;;AAED,QAAMA,YAAN,GAAqB;AAClB,UAAMC,QAAQ,GAAG,MAAM,KAAKH,OAAL,CAAaI,QAAb,EAAvB;AACA,QAAIC,KAAK,GAAG,EAAZ;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAACI,IAAT,CAAcT,MAAlC,EAA0CQ,CAAC,EAA3C,EAA+C;AAC5CD,MAAAA,KAAK,CAACG,IAAN,CAAWL,QAAQ,CAACI,IAAT,CAAcD,CAAd,EAAiBtB,IAA5B;AACF;;AACD,SAAKX,QAAL,CAAc,OAAO;AAAEN,MAAAA,SAAS,EAAEsC;AAAb,KAAP,CAAd;AACF;;AA2DDI,EAAAA,MAAM,GAAG;AACN,WACG;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAxB,CADH,EAEG;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAM,MAAA,QAAQ,EAAE,KAAKb,aAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEL,oBAAC,QAAD;AAAU,MAAA,SAAS,EAAE,KAAK9B,KAAL,CAAWC,SAAhC;AAA2C,MAAA,SAAS,EAAC,cAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFK,CADH,EAKG;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAEL;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,aAAxB;AAAsC,MAAA,WAAW,EAAC,EAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFK,CALH,EASG;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAEL;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,IAAI,EAAC,OAA1B;AAAkC,MAAA,WAAW,EAAC,EAA9C;AAAiD,MAAA,IAAI,EAAC,KAAtD;AAA4D,MAAA,QAAQ,MAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFK,CATH,EAaG;AAAQ,MAAA,SAAS,EAAC,YAAlB;AAA+B,MAAA,IAAI,EAAC,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6C;AAAK,MAAA,IAAI,EAAC,UAAV;AAAqB,MAAA,GAAG,EAAC,QAAzB;AAAkC,MAAA,GAAG,EAAEJ,GAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA7C,CAbH,CADH,CADH,CAFH,EAqBG,oBAAC,KAAD;AACG,MAAA,KAAK,EAAE,KAAKG,KAAL,CAAWE,KADrB;AAEG,MAAA,SAAS,EAAE,KAAKF,KAAL,CAAWC,SAFzB;AAGG,MAAA,2BAA2B,EAAE,KAAKwB,2BAHrC;AAIG,MAAA,gBAAgB,EAAE,KAAKpB,gBAJ1B;AAKG,MAAA,cAAc,EAAE,KAAKO,cALxB;AAMG,MAAA,uBAAuB,EAAE,KAAKc,uBANjC;AAOG,MAAA,aAAa,EAAE,KAAKI,aAPvB;AAQG,MAAA,SAAS,EAAC,gBARb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArBH,EA+BG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,KAAK9B,KAAL,CAAWE,KAAX,CAAiB8B,MAAjB,GAA0B,CAA1B,GAA8B,EAA9B,GAAoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADxC,CA/BH,EAkCG,oBAAC,SAAD;AACG,MAAA,SAAS,EAAE,KAAKhC,KAAL,CAAWC,SADzB;AAEG,MAAA,iBAAiB,EAAE,KAAKa,iBAF3B;AAGG,MAAA,gBAAgB,EAAE,KAAKd,KAAL,CAAWG,gBAHhC;AAIG,MAAA,2BAA2B,EAAE,KAAKsB,2BAJrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlCH,CADH;AA2CF;;AA9H6C","sourcesContent":["import React, { Component } from 'react'\nimport CustomersService from '../services/customers.service'\nimport Dropdown from '../components/Dropdown'\nimport Table from '../components/Table'\nimport EditModal from '../components/EditModal'\nimport add from '../img/add.png'\nimport './Debts.css'\n\nexport default class DebtsPage extends Component {\n   state = {\n      customers: [],\n      debts: [],\n      debtUnderEdition: undefined\n   }\n\n   constructor() {\n      super()\n      this.service = new CustomersService()\n   }\n\n   componentDidMount() {\n      this.getCustomers()\n   }\n\n   async getCustomers() {\n      const response = await this.service.getUsers()\n      let names = []\n      for (let i = 0; i < response.data.length; i++) {\n         names.push(response.data[i].name)\n      }\n      this.setState(() => ({ customers: names }))\n   }\n\n   handleDeleteDebt = (debtToRemove) => {\n      this.setState((prevState) => ({\n         debts: prevState.debts.filter((item) => item.id !== debtToRemove)\n      }))\n   }\n\n   handleEditDebt = (debtToEdit) => {\n      this.setState(() => {\n         return ({ debtUnderEdition: debtToEdit })\n      })\n   }\n\n   handleSaveChanges = (e) => {\n      e.preventDefault()\n      const customerName = this.state.debtUnderEdition.name\n      const description = e.target.elements.description.value.trim()\n      const value = e.target.elements.value.value\n      this.setState((prevState) => ({\n         debts: prevState.debts.map((item) => {\n            if (item.id === this.state.debtUnderEdition.id) {\n               item = { ...item, name: customerName, description, value }\n            }\n            return item\n         }),\n         debtUnderEdition: undefined\n      }))\n   }\n\n   handleClearDebtUnderEdition = () => {\n      this.setState(() => ({ debtUnderEdition: undefined }))\n   }\n   handleListCustomerDebts = (customerName) => {\n      this.state.debts.filter((item) => item.customerNam === customerName)\n      console.log(this.state.debts)\n      console.log(customerName)\n   }\n\n   handleNewDebt = (e) => {\n      e.preventDefault()\n      const customerName = e.target.elements.customerName.value\n      const description = e.target.elements.description.value.trim()\n      const value = e.target.elements.value.value\n      const debt = {\n         id: this.state.debts.length + 1,\n         name: customerName,\n         description,\n         value\n      }\n      this.setState((prevState) => ({\n         debts: prevState.debts.concat(debt)\n      }))\n\n      // clear inputs\n      e.target.elements.description.value = ''\n      e.target.elements.value.value = ''\n   }\n\n   render() {\n      return (\n         <div className=\"main\">\n            <div className=\"header\"><h2>Compras</h2></div>\n            <div className=\"input-bar-container\">\n               <form onSubmit={this.handleNewDebt}>\n                  <div className=\"input-bar\">\n                     <div className=\"label\">\n                        Cliente\n                <Dropdown customers={this.state.customers} inputName=\"customerName\" />\n                     </div>\n                     <div className=\"label\">\n                        Descrição\n                <input type=\"text\" name=\"description\" placeholder=\"\"></input>\n                     </div>\n                     <div className=\"label\">\n                        Valor\n                <input type=\"number\" name='value' placeholder=\"\" step=\"any\" required></input>\n                     </div>\n                     <button className='add-button' type=\"submit\"><img name=\"add-debt\" alt=\"Enviar\" src={add}></img></button>\n                  </div>\n               </form>\n            </div>\n            <Table\n               debts={this.state.debts}\n               customers={this.state.customers}\n               handleClearDebtUnderEdition={this.handleClearDebtUnderEdition}\n               handleDeleteDebt={this.handleDeleteDebt}\n               handleEditDebt={this.handleEditDebt}\n               handleListCustomerDebts={this.handleListCustomerDebts}\n               handleNewDebt={this.handleNewDebt}\n               className=\"customer-table\"\n            />\n            <div className=\"center-text\">\n               {this.state.debts.length > 0 ? '' : (<i>Nenhuma compra cadastrada</i>)}\n            </div>\n            <EditModal\n               customers={this.state.customers}\n               handleSaveChanges={this.handleSaveChanges}\n               debtUnderEdition={this.state.debtUnderEdition}\n               handleClearDebtUnderEdition={this.handleClearDebtUnderEdition}>\n            </EditModal>\n         </div>\n      )\n   }\n}"]},"metadata":{},"sourceType":"module"}